<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="page_title">Situs Komunitas AoEM Server 199</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    
    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Ke Atas"><i class="fas fa-arrow-up"></i></button>

    <header class="header">
        <div class="container header-container">
            <div class="header-branding">
                <h1 data-lang-key="hub_title">AOEM S199</h1> 
            </div>
            
            <div class="header-status-right">
                <div class="server-time" id="serverTime">Loading Time...</div> 
                <div class="lang-container" onclick="toggleLangMenu(event)">
                    <button class="btn btn-secondary lang-button" id="currentLangBtn">ID</button>
                    <div class="lang-dropdown hidden" id="langDropdown">
                        <button onclick="changeLanguage('id')">ID</button>
                        <button onclick="changeLanguage('en')">EN</button>
                        <button onclick="changeLanguage('es')">ES</button>
                        <button onclick="changeLanguage('de')">DE</button>
                        <button onclick="changeLanguage('zh')">ZH</button>
                        <button onclick="changeLanguage('ja')">JA</button>
                        <button onclick="changeLanguage('ru')">RU</button>
                    </div>
                </div>

                <button class="menu-toggle" onclick="toggleMenu()">
                    <i class="fas fa-bars" id="menuIcon"></i>
                </button>
            </div>
        </div>
        
        <div class="header-king-info-bar">
            <p data-lang-key="king_name_prefix">Raja:</p> <span id="kingNameDisplay">Nama Raja Belum Ditetapkan</span>
        </div>

        <nav class="nav-menu-container">
            <ul class="nav-menu" id="navMenu"> 
                <li><button class="tab-button active" id="berandaTab" onclick="showSection('beranda', event)" data-lang-key="menu_home">Beranda</button></li>
                <li><button class="tab-button" id="ranksTab" onclick="showSection('ranks', event)" data-lang-key="menu_ranks">Peringkat</button></li>
                <li><button class="tab-button" id="eventsTab" onclick="showSection('events', event)" data-lang-key="menu_events">Events</button></li>
                <li><button class="tab-button" id="infoTab" onclick="showSection('info', event)" data-lang-key="menu_info">Info Server</button></li>
                <li><button class="tab-button" id="migrasiTab" onclick="showSection('migrasi', event)" data-lang-key="menu_migration">Pendaftar Migrasi</button></li>
                <li><button class="tab-button" id="buffTab" onclick="showSection('buff', event)" data-lang-key="menu_buff">Buff Request</button></li>
                
                <li><button class="tab-button" id="loginAdminTab" onclick="showSection('login', event)" data-lang-key="menu_login">Login Admin</button></li>
                <li><button class="tab-button hidden" id="adminToolsTab" onclick="showSection('admin', event)" data-lang-key="menu_admin">Admin Tools</button></li>
            </ul>
        </nav>
    </header>

    <main class="container content-area">

        <section id="beranda" class="content-section">
            <h2 data-lang-key="home_title">üëë Beranda & Postingan Terbaru</h2>
            
            <div class="card-grid-2">
                <div class="card status-card">
                    <h3 data-lang-key="status_war_title">STATUS SERVER WAR</h3>
                    <div class="status-indicator war-status" id="warStatusP">
                        <span data-lang-key="status_label">STATUS</span>: <span id="currentWarStatus">PVE</span>
                    </div>
                </div>
                <div class="card status-card">
                    <h3 data-lang-key="mig_status_card">Status Penerimaan Migrasi S199</h3>
                    <div class="status-indicator mig-status" id="migrationStatusP">
                        <span data-lang-key="status_label">STATUS</span>: <span id="currentMigStatus">SYARAT KHUSUS</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div id="postingsWrapper" class="postings-wrapper">
                    <p style="text-align: center; font-style: italic; color: #a9adb1;" data-lang-key="post_loading">Memuat postingan...</p>
                </div>
                </div>
            
            <div class="card form-card">
                <h3 data-lang-key="mig_form_title">üê¶‚Äçüî• Formulir Pendaftaran Migrasi ke S199</h3>
                <p data-lang-key="mig_form_note" class="note">Silakan isi data Anda di bawah ini jika berminat migrasi.</p>
                <form id="migrationForm">
                    <label for="migName" data-lang-key="mig_name">Nama Pemain/In-Game Name:</label>
                    <input type="text" id="migName" required>
                    
                    <label for="migServer" data-lang-key="mig_server">Server Asal:</label>
                    <input type="text" id="migServer" required>

                    <label for="migPower" data-lang-key="mig_power">Total Power (Juta):</label>
                    <input type="number" id="migPower" min="1" required>

                    <label for="migContact" data-lang-key="mig_contact">Kontak (Discord/Telegram):</label>
                    <input type="text" id="migContact" required>

                    <button type="submit" class="btn btn-primary" data-lang-key="mig_submit">Kirim Pendaftaran Migrasi</button>
                </form>
            </div>
        </section>

        <section id="ranks" class="content-section hidden">
            <h2 data-lang-key="ranks_title">üìà Peringkat Pemain (Power & Merit)</h2>
            
            <div class="card">
                <h3 data-lang-key="ranks_power_card">Power Ranking TOP 5 (Display Power)</h3>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_player">Pemain</th>
                                <th data-lang-key="tbl_alliance">Aliansi</th>
                                <th data-lang-key="tbl_power">Power</th>
                                <th data-lang-key="tbl_notes">Keterangan</th>
                            </tr>
                        </thead>
                        <tbody id="powerRankBody">
                            </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3 data-lang-key="ranks_merit_card">Merit Ranking TOP 5 (Display Merit)</h3>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_player">Pemain</th>
                                <th data-lang-key="tbl_alliance">Aliansi</th>
                                <th data-lang-key="tbl_merit">Merit</th>
                                <th data-lang-key="tbl_notes">Keterangan</th>
                            </tr>
                        </thead>
                        <tbody id="meritRankBody">
                            </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="events" class="content-section hidden">
            <h2 data-lang-key="events_title">‚è≥ Status Event Global</h2>
            
            <div class="card-grid-2">
                <div class="card status-card">
                    <h3 data-lang-key="events_current_card">Event Sedang Berlangsung</h3>
                    <div class="status-indicator event-status" id="eventStatusP">
                        <span data-lang-key="status_label_current">Status</span>: <span id="currentEventStatus">SELESAI</span>
                    </div>
                    <p class="event-name" id="currentEventName">Nama Event Aktif</p>
                    <p class="event-note" data-lang-key="events_note" id="currentEventNote">Info terakhir: ---</p>
                </div>
                
                <div class="card">
                    <h3 data-lang-key="events_kvk_card">Jadwal Perang</h3>
                    <div id="kvkScheduleContent" class="html-content-display">Jadwal Perang.</div>
                </div>
            </div>
        </section>
        
        <section id="info" class="content-section hidden">
            <h2 data-lang-key="info_title">üåê Info Server 199</h2>
            
            <div class="card">
                <h3 data-lang-key="info_alliance_card">Informasi Aliansi Utama</h3>
                <div id="allianceInfoContent" class="html-content-display">Tidak ada info aliansi.</div>
            </div>

            <div class="card">
                <h3 data-lang-key="info_rules_card">Peraturan Server</h3>
                <div id="rulesInfoContent" class="html-content-display">Tidak ada peraturan server.</div>
            </div>
        </section>
        
        <section id="migrasi" class="content-section hidden">
            <h2 data-lang-key="mig_status_title">‚úàÔ∏è Status Pendaftar Migrasi ke Server 199</h2>

            <div class="card-grid-2">
                <div class="card status-card">
                    <h3 data-lang-key="mig_status_card">Status Penerimaan Migrasi S199</h3>
                    <div class="status-indicator mig-status" id="migrationStatusP2">
                        <span data-lang-key="status_label">STATUS</span>: <span id="currentMigStatus2">SYARAT KHUSUS</span>
                    </div>
                    <p class="event-note" data-lang-key="mig_note">Anda dapat mendaftar melalui formulir di menu **Beranda**.</p>
                </div>
            </div>
            
            <div class="card">
                <h3 data-lang-key="mig_list_card">Daftar Pendaftar (Kontak disamarkan)</h3>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_name">Nama</th>
                                <th data-lang-key="tbl_server_asal">Server Asal</th>
                                <th data-lang-key="tbl_power_jt">Power (Jt)</th>
                                <th data-lang-key="tbl_date">Tanggal Daftar</th>
                            </tr>
                        </thead>
                        <tbody id="migrationListPublic">
                            </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="buff" class="content-section hidden">
            <h2 data-lang-key="buff_title">üõ°Ô∏è Formulir Permintaan Buff Imperial City (IC)</h2>
            
            <div class="card form-card">
                <h3 data-lang-key="buff_form_card">Formulir Permintaan</h3>
                <p data-lang-key="buff_note" class="note">Permintaan Buff Kota Imperial dikirimkan ke R4/R5. Pastikan Anda berada di koordinat yang benar saat meminta buff.</p>
                <form id="buffRequestForm">
                    <label for="buffName" data-lang-key="buff_name">Nama Pemain:</label>
                    <input type="text" id="buffName" required>
                    
                    <label for="buffType" data-lang-key="buff_type">Jenis Buff:</label>
                    <select id="buffType" required>
                        <option value="" disabled selected data-lang-key="buff_select">Pilih Jenis Buff</option>
                        <option value="Gathering">Gathering</option>
                        <option value="PvP">PvP (Anti-Rally)</option>
                        <option value="Hunting">Hunting</option>
                        <option value="Research">Research/Training</option>
                        <option value="Lainnya">Lainnya</option>
                    </select>

                    <label for="buffContact" data-lang-key="mig_contact">Kontak (Discord/Telegram):</label>
                    <input type="text" id="buffContact" required>

                    <button type="submit" class="btn btn-primary" data-lang-key="buff_submit">Kirim Permintaan Buff</button>
                </form>
            </div>

            <div class="card">
                <h3 data-lang-key="buff_list_card">Daftar Request Buff Saat Ini</h3>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_name">Nama</th>
                                <th data-lang-key="tbl_buff_type">Jenis Buff</th>
                                <th data-lang-key="tbl_date_req">Tanggal Request</th>
                                <th data-lang-key="tbl_time_req">Waktu Request</th>
                                <th data-lang-key="tbl_status">Status</th>
                            </tr>
                        </thead>
                        <tbody id="buffListPublic">
                            </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="login" class="content-section hidden">
            <h2 data-lang-key="admin_title">üîë Admin Panel</h2>
            <div class="card form-card">
                <h3 data-lang-key="admin_login_card">Login Admin</h3>
                <form id="adminLoginForm" onsubmit="event.preventDefault(); loginAdmin()">
                    <label for="adminPass">Password:</label>
                    <input type="password" id="adminPass" required>
                    <p id="loginMessage" style="color: var(--danger-color); font-weight: bold;"></p>
                    <button type="submit" class="btn btn-primary" data-lang-key="btn_login">Login</button>
                </form>
            </div>
        </section>

        <section id="admin" class="content-section hidden">
            <h2 data-lang-key="menu_admin">Admin Tools</h2>
            
            <div class="card control-buttons">
                <button class="btn btn-danger" onclick="logoutAdmin()" data-lang-key="btn_logout">Logout Admin</button>
                <button class="btn btn-warning" onclick="clearAllDataPrompt('all')" data-lang-key="adm_btn_clear_all_data">Clear All Data (Bahaya!)</button>
            </div>
            
            <div class="card">
                <h3 data-lang-key="adm_post_title">1. Tambah/Edit Postingan</h3>
                <form id="adminPostForm" onsubmit="event.preventDefault(); submitAdminPost()">
                    <input type="hidden" id="postIdToEdit">
                    <input type="hidden" id="postTitle" value="Admin Post"> <label for="postContent" data-lang-key="adm_post_content_label">Isi Postingan (Teks/URL Gambar):</label>
                    <textarea id="postContent" rows="4" required></textarea>
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_add" id="postSubmitBtn">Tambah Postingan</button>
                    <button type="button" class="btn btn-secondary hidden" id="cancelEditBtn" onclick="cancelEditPost()" data-lang-key="adm_btn_cancel">Batalkan Edit</button>
                </form>

                <h4 data-lang-key="adm_post_manage">Kelola Postingan Saat Ini</h4>
                <div id="adminPostList">
                    </div>
            </div>

            <div class="card">
                <h3 data-lang-key="adm_ranks_title">2. Input Data Peringkat (Power/Merit)</h3>
                <form id="adminRankInputForm" onsubmit="event.preventDefault(); addRankEntry()">
                    <div class="rank-input-grid-v2">
                        <input type="number" id="rankNo" placeholder="No." min="1" required>
                        <input type="text" id="rankName" placeholder="Nama Pemain" required>
                        <input type="text" id="rankAlliance" placeholder="Aliansi" required>
                        <input type="number" id="rankPowerValue" placeholder="Power (Jt)"> 
                        <input type="number" id="rankMeritValue" placeholder="Merit">
                        <input type="text" id="rankNotes" placeholder="Keterangan (Opsional)">
                        <button type="submit" class="btn btn-secondary">Tambah</button>
                    </div>
                </form>
                
                <h4 data-lang-key="adm_ranks_manage">Data Ranking Saat Ini (Edit lalu Simpan)</h4>
                <div id="adminRankListContainer" class="admin-rank-list">
                    </div>
                <button class="btn btn-primary" onclick="updateRankDataAdmin()" data-lang-key="adm_btn_save_all_ranks">Simpan Semua Perubahan</button>
                <button class="btn btn-warning" onclick="clearRankDataPrompt('power')" data-lang-key="adm_btn_clear_power">Clear Power Ranks</button>
                <button class="btn btn-warning" onclick="clearRankDataPrompt('merit')" data-lang-key="adm_btn_clear_merit">Clear Merit Ranks</button>
            </div>
            
            <div class="card">
                <h3 data-lang-key="adm_status_event_title">3. Edit Status Event</h3>
                <form id="adminEventStatusForm" onsubmit="event.preventDefault(); updateEventStatusAdmin()">
                    <label for="admEventName" data-lang-key="adm_status_event_name">Nama Event Aktif:</label>
                    <input type="text" id="admEventName" required>

                    <label for="admEventStatus" data-lang-key="adm_status_event_status">Status Event:</label>
                    <input type="text" id="admEventStatus" required>

                    <label for="admEventNote" data-lang-key="adm_status_event_note">Catatan / Detail Tambahan:</label>
                    <input type="text" id="admEventNote">
                    
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_update">Update Status Event</button>
                </form>
            </div>

            <div class="card">
                <h3 data-lang-key="adm_info_title">4. Edit Info Server</h3>
                <form id="adminInfoForm" onsubmit="event.preventDefault(); updateServerInfoAdmin()">
                    <label for="admAllianceInfo" data-lang-key="adm_info_alliance_label">Info Aliansi Utama (Gunakan tag HTML untuk format):</label>
                    <textarea id="admAllianceInfo" rows="5" required></textarea>
                    
                    <label for="admRulesInfo" data-lang-key="adm_info_rules_label">Peraturan Server (Gunakan tag HTML untuk format):</label>
                    <textarea id="admRulesInfo" rows="5" required></textarea>
                    
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_add_update">Tambah/Update Data Info</button>
                </form>
            </div>
            
            <div class="card">
                <h3 data-lang-key="adm_mig_status_and_list">5. Pendaftaran Migrasi & Status</h3>
                
                <form id="adminStatusForm" onsubmit="event.preventDefault(); updateWarMigStatusAdmin()">
                    <label for="admWarStatus" data-lang-key="adm_status_war">Status War:</label>
                    <input type="text" id="admWarStatus" required>
                    
                    <label for="admMigStatus" data-lang-key="adm_status_mig">Status Migrasi:</label>
                    <input type="text" id="admMigStatus" required>
                    
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_update">Update Status Server & Migrasi</button>
                </form>
                
                <h4 data-lang-key="adm_mig_detail_title">Data Pendaftaran Migrasi (DETAIL - Kontak Jelas)</h4>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_name">Nama</th>
                                <th data-lang-key="tbl_server_asal">Server Asal</th>
                                <th data-lang-key="tbl_power_jt">Power (Jt)</th>
                                <th data-lang-key="tbl_contact">Kontak (Jelas)</th>
                                <th data-lang-key="tbl_date">Tanggal Daftar</th>
                                <th data-lang-key="tbl_action">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="migrationListAdmin">
                            </tbody>
                    </table>
                </div>
                <button class="btn btn-warning" onclick="clearAllDataPrompt('migration')" data-lang-key="adm_btn_clear_all">Bersihkan Daftar Migrasi</button>
            </div>
            
            <div class="card">
                <h3 data-lang-key="adm_buff_detail_title">6. Daftar Permintaan Buff (Detail)</h3>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-lang-key="tbl_no">#</th>
                                <th data-lang-key="tbl_name">Nama</th>
                                <th data-lang-key="tbl_buff">Buff</th>
                                <th data-lang-key="tbl_contact">Kontak (Jelas)</th>
                                <th data-lang-key="tbl_date_time">Waktu & Tanggal Request</th>
                                <th data-lang-key="tbl_status">Status</th>
                                <th data-lang-key="tbl_action">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="buffListAdmin">
                            </tbody>
                    </table>
                </div>
                <button class="btn btn-warning" onclick="clearAllDataPrompt('buff')" data-lang-key="adm_btn_clear_all">Bersihkan Daftar Buff</button>
            </div>

            <div class="card">
                <h3 data-lang-key="adm_kvk_title">7. Edit Jadwal Perang</h3>
                <form onsubmit="event.preventDefault(); updateKvkScheduleAdmin()">
                    <label for="admKvkSchedule" data-lang-key="adm_kvk_label">Jadwal KvK/Stellar War (Gunakan tag HTML untuk format):</label>
                    <textarea id="admKvkSchedule" rows="5"></textarea>
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_save">Simpan Jadwal</button>
                </form>
            </div>
            
            <div class="card">
                <h3 data-lang-key="adm_king_title">8. Edit Nama Raja</h3>
                <form onsubmit="event.preventDefault(); updateKingNameAdmin()">
                    <label for="admKingName" data-lang-key="adm_king_label">Nama Raja Saat Ini:</label>
                    <input type="text" id="admKingName" required>
                    <button type="submit" class="btn btn-primary" data-lang-key="adm_btn_save_king">Simpan Nama Raja</button>
                </form>
            </div>

        </section>

    </main>

    <footer class="footer">
        <div class="container">
            <p data-lang-key="footer_text">¬© 2025 AOEM 199 by HADES.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
